# DDD勉強会 実践課題その2

## モデルリファクタリング
モデルを変更することのコストを知る
- descriptionをValueObjectにする

## モデルの変更コストを小さくするためのデザインパターン
ドメインモデルをDBや画面で直接扱うと、モデル変更の影響範囲が大きくなってしまう問題に対処する効果的なデザインパターンを知る

### 画面項目用オブジェクト
  - 画面とモデルの間に差し込むFormクラスを使ってみる
    - presentation.controller.todo.form パッケージに実装
    - FormクラスにはドメインモデルからFormを作るファクトリメソッドを実装する
  - ドメインモデルとの依存関係の方向性に注意する

### データアクセス用オブジェクト
  - 永続化層(主にDB)とモデルの間に差し込むDTOを使ってみる
    - infrastructure.datasource.dto パッケージに実装
    - DTOクラスにはDTOからドメインモデルを作るメソッドを実装する
  - ドメインモデルとの依存関係の方向性に注意する

### MapperからResultMapを無くしてみる
- 複雑なマッピングが必要無い場合のMapperの書き方


## あるべきモデルの姿
モデルの記述がシンプルになることのメリットを知る
- モデルを全てレコードクラスにしてみる
- 画面側に記述されてしまっているロジックをドメインモデルに移動する


---

## バリデーション
### Beanバリデーション
- FormクラスにBeanバリデーションを実装する
  - タイトルのバリデーションを実装する

### ドメインサービスでのバリデーション
既存データとの整合性チェック等はドメインサービスで行う
- 同じタイトルのTODOは登録できないようにするためのドメインサービスのバリデーションを実装する


---

## その他リファクタリングネタ

- Controllerを適切に分割する
- TODO詳細をIDから取得するように変更する
- TODOを編集可能にする
- TODOを削除可能にする
- DONEを実装する
- Controllerで@ModelAttribute を使う
